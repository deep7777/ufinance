function dataAgentSummarList(){$.fn.dataTable.moment("D/M/YYYY"),$("#data-all-agent-summary-list").DataTable({keys:!0,aaSorting:[],order:[[3,"desc"]],aoColumnDefs:[{bSortable:!0,aTargets:[-1]}]})}function delRecord(t){var a=$(t).data("url"),e=$(t).data("go-to"),n=$(t).data("id"),o=$(t).data("token"),r={id:n,_token:o};console.log(r),BootstrapDialog.show({type:BootstrapDialog.TYPE_DANGER,title:"Delete Record",message:"Are you sure you want to delete record ?",buttons:[{label:"Yes",cssClass:"btn-danger btn-sm",action:function(t){t.close(),$.ajax({url:a,type:"post",data:r,success:function(t){"success"==t?window.location.href=e:BootstrapDialog.show({type:BootstrapDialog.TYPE_WARNING,title:"Warning",message:t})}})}}]})}function searchCustomerId(){$("#search_customer_id").change(function(){var t=$("#search_customer_id option:selected").val();window.location.href=$("#url").val()+"/loan_requirement/customerRequirement/"+t})}function getClosingDate(){var t=$("#url").val()+"/loan_requirement/getClosingDate";$.ajax({url:t,type:"post",data:$("#frm_edit_loan_requirement").serialize(),success:function(t){""!=t&&$("#loan_closing_date").val(t)}})}function getCustomerLoanAccountInfo(){var t=$("#url").val()+"/loan/getCustomerAccountInfo",a=$("#frm_loan").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"json",success:function(t){"success"==t.status?($("#agent_id").val(t.agent_id),$("#customer_name").val(t.customer_first_name+" "+t.customer_last_name),$("#agent_name").val(t.agent_name),$("#total_deposit").val(t.total_deposit),$("#frm_loan .loan_customer_data").html(""),getCustomerLoanTemplate(t.customer_id)):($("#frm_loan .loan_customer_data").html("<div class='red'>Loan Account Not Found.</div>"),$(".clear-all").val(""))}})}function bindLoanMonthYear(){$("#frm_loan #month_year").click(function(){getLoanMonthYearValues()})}function getLoanMonthYearValues(){var t=$("#customer_id").val();""!=t&&"undefined"!=typeof t&&getCustomerLoanTemplate(t)}function getCustomerLoanTemplate(t){var a=$("#url").val()+"/loan/getMonthlyCustomerData/"+t,e=$("#frm_loan").serialize();$.ajax({url:a,type:"POST",data:e,dataType:"html",success:function(t){$("#frm_loan .loan_customer_data").html(t)}})}function initDataTableList(){$("#data-keytable-list").DataTable({keys:!0,aaSorting:[]})}function getAgentCustomerDailyCollection(){var t=$("#url").val()+"/getAgentCustomersDailyCollection",a=$("#frm_all_agent_daily_collection").serialize();collection_date!==$("#frm_all_agent_daily_collection #collection_date").val()&&($("#frm_all_agent_daily_collection .agent_customer_daily_collection").html(""),$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$("#frm_all_agent_daily_collection .agent_customer_daily_collection").html(t),agent_id=$("#frm_all_agent_daily_collection #agent_id option:selected").val(),collection_date=$("#frm_all_agent_daily_collection #collection_date").val(),initDataTableList()}}))}function customerTransactionList(){$.fn.dataTable.moment("D/M/YYYY"),$("#customer-transaction-list").DataTable({keys:!0,aaSorting:[],order:[[1,"desc"]],aoColumnDefs:[{bSortable:!0,aTargets:[-1]}]})}function getCustomerSavingAccountInfo(){var t=$("#url").val()+"/saving/getCustomerAccountInfo",a=$("#frm_saving").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"json",success:function(t){"success"==t.status?($("#agent_id").val(t.agent_id),$("#customer_name").val(t.customer_first_name+" "+t.customer_last_name),$("#agent_name").val(t.agent_name),$("#total_deposit").val(t.total_deposit),$("#frm_saving .saving_customer_data").html(""),getCustomerSavingTemplate(t.customer_id)):($("#frm_saving .saving_customer_data").html(""),$(".clear-all").val(""))}})}function bindMonthYear(){$("#frm_saving #month_year").click(function(){getMonthYearValues()})}function getMonthYearValues(){var t=$("#customer_id").val();""!=t&&"undefined"!=typeof t&&getCustomerSavingTemplate(t)}function getCustomerSavingTemplate(t){""===t&&(t=$("#frm_saving #search_saving_customer_id option:selected").val());var a=$("#url").val()+"/saving/getMonthlyCustomerData/"+t,e=$("#frm_saving").serialize();$("#frm_saving .saving_customer_data").html(""),$.ajax({url:a,type:"POST",data:e,dataType:"html",success:function(t){$("#frm_saving .saving_customer_data").html(t)}})}function getWithDrawalHistory(){var t=$("#url").val()+"/withdrawal/getCustomerWithdrawalHistory",a=$("#frm_withdrawal").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$("#frm_withdrawal .withdrawal_history").html(t),bindWithDrawalDataKeyTableList()}})}function bindWithDrawalDataKeyTableList(){$.fn.dataTable.moment("D-MMM-YYYY"),$("#data-withdrawal-keytable-list").DataTable({keys:!0,aaSorting:[],aoColumnDefs:[{bSortable:!1}]})}if($("#dashboard_date").length){var dashboard_date=$("#dashboard_date").val();$("#dashboard_date").change(function(){var t=$("#url").val()+"/admin/getAgentSummaryList",a=$("#frm_dashboard").serialize();dashboard_date!==$("#dashboard_date").val()&&($(".agent_list").html(""),$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){return $(".agent_list").html(t),dataAgentSummarList(),dashboard_date=$("#dashboard_date").val(),!1}}))})}if($("#data-keytable-list").length&&($.fn.dataTable.moment("D/M/YYYY"),$("#data-keytable-list").DataTable({keys:!0,aaSorting:[],aoColumnDefs:[{bSortable:!1,aTargets:[-1]}]})),$("#data-all-agent-summary-list").length&&dataAgentSummarList(),$("#data-all-list").length&&($.fn.dataTable.moment("D/M/YYYY"),$("#data-all-list").DataTable({keys:!0,aaSorting:[]})),$(".customers-search").length&&$("#reset-customers").click(function(){$(".customers-search").val("")}),$("#txt-customers-data-list").length&&$("#txt-customers-data-list").on("input",function(){var t=this.value;$("#customers-data-list").find("option").filter(function(){this.value==t&&""!=t&&(customer_id=$(this).attr("customer-id"),window.location.href=$("#url").val()+"/loan_requirement/customerRequirement/"+customer_id)})}),$("#search_customer_id").length&&searchCustomerId(),$("#search_customer_agent_id").length&&$("#search_customer_agent_id").change(function(){var t=$("#search_customer_agent_id option:selected").val(),a=$("#url").val()+"/loan_requirement/getAgentCustomers/"+t;$(".agent_customers_list").length&&$(".agent_customers_list").remove(),$.ajax({url:a,type:"GET",dataType:"html",success:function(t){$(".agent_customers").after(t),searchCustomerId()}})}),$("#loan_received_date").length&&$(".loan_closing_date").change(function(){getClosingDate()}),$("#loan_account_status_id").length>0&&$("#loan_account_status_id").change(function(){var t=["loan_received_date","loan_closing_date","loan_tenure"];"3"==$(this).val()?$.each(t,function(t,a){$("#"+a).removeAttr("required")}):$.each(t,function(t,a){$("#"+a).attr("required")||$("#"+a).attr("attr","required")})}),$("#frm_loan  #txt-loan-customers-data-list").length&&$("#frm_loan #txt-loan-customers-data-list").on("input",function(){var t=this.value;$("#loan-customers-data-list").find("option").filter(function(){this.value==t&&""!=t&&(customer_account_no=$(this).attr("customer-account-no"),$("#frm_loan #customer_account_no").val(customer_account_no),getCustomerLoanAccountInfo())})}),$("#frm_loan_report #agent_id").length&&$("#frm_loan_report #agent_id").change(function(){var t=$(this).val(),a=$("#url").val()+"/reports/getAgentCustomers/"+t;$("#frm_loan_report .customer_loan_report_data").html(""),""!=t&&$.ajax({url:a,type:"GET",dataType:"html",success:function(t){$("#frm_loan_report .customer_details").html(t)}})}),$("#frm_loan_report #customer_loan_report").length&&$("#frm_loan_report #customer_loan_report").click(function(){var t=$("#url").val()+"/getCustomerLoanSummary",a=$("#frm_loan_report").serialize();$("#frm_loan_report .customer_loan_report_data").html(""),$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$("#frm_loan_report .customer_loan_report_data").html(t),$.fn.dataTable.moment("D/M/YYYY"),$("#data-all-list").DataTable({keys:!0,aaSorting:[]})}})}),$("#frm_loan .loan-month-year").length&&$(".loan-month-year").datetimepicker({format:"d/m/Y",datepicker:!0,timepicker:!1}),$("#frm_loan input.month-picker").length&&$("#frm_loan input.month-picker").monthpicker({changeYear:!0,onClose:getLoanMonthYearValues}),$("#frm_loan #customer_account_no").length&&$("#frm_loan #customer_account_no").change(function(){getCustomerLoanAccountInfo()}),$("#frm_loan #customer_account_no").length&&$("#frm_loan #customer_account_no").val().length>3&&getCustomerLoanAccountInfo(),$("#frm_loan #search_loan_customer_id").length&&bindLoanCustomerId(),$("#frm_loan #month_year").length&&bindLoanMonthYear(),$("#frm_all_agent_daily_collection #collection_date").length>0){var agent_id="",collection_date="";$("#frm_all_agent_daily_collection #collection_date").change(function(){getAgentCustomerDailyCollection()}),$("#frm_all_agent_daily_collection #agent_id").change(function(){collection_date="",getAgentCustomerDailyCollection()})}$("#agent_monthly_collection_report").click(function(){var t=$("#url").val()+"/getAgentMonthlyCollectionData",a=$("#frm_agent_monthly_collection_report").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$(".agent_monthly_collection_data").html(t)}})}),$("#agent_monthly_daily_collection_report").click(function(){var t=$("#url").val()+"/getAgentMonthlyDailyCollection",a=$("#frm_agent_monthly_daily_collection_report").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$(".agent_monthly_daily_collection_report_data").html(t)}})}),$("#customer_transaction_report").click(function(){var t=$("#url").val()+"/getCustomerTransaction",a=$("#frm_customer_transaction_report").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$(".customer_transaction_report_data").html(t),customerTransactionList()}})}),$("#loan_report").click(function(){var t=$("#url").val()+"/getLoanSummary",a=$("#frm_loan_report").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$(".loan_report_data").html(t)}})}),$("#balance_sheet_report").click(function(){var t=$("#url").val()+"/getBalanceSheet",a=$("#frm_balance_sheet_report").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$(".balance_sheet_report_data").html(t)}})}),$("#frm_customer_report #customer_report").length&&$("#frm_customer_report #customer_report").click(function(){var t=$("#url").val()+"/getCustomerSummary",a=$("#frm_customer_report").serialize();$("#frm_customer_report .customer_report_data").html(""),$.ajax({url:t,type:"POST",data:a,dataType:"html",success:function(t){$("#frm_customer_report .customer_report_data").html(t),$.fn.dataTable.moment("D/M/YYYY"),$("#data-all-list").DataTable({keys:!0,aaSorting:[]})}})}),$("#frm_balance_sheet_report").length&&$("#frm_balance_sheet_report #balance_sheet_reset").click(function(){$("#frm_balance_sheet_report")[0].reset()}),$("#frm_loan_report").length&&$("#frm_loan_report #customer_loan_report_reset").click(function(){$("#frm_loan_report")[0].reset(),$("#frm_loan_report #customer_account_no").hide()}),$("#frm_customer_transaction_report").length&&$("#frm_customer_transaction_report #customer_transaction_report_reset").click(function(){$("#frm_customer_transaction_report")[0].reset()}),$("#frm_customer_report").length&&$("#frm_customer_report #customer_report_reset").click(function(){$("#frm_customer_report")[0].reset()}),$("#frm_saving  #txt-saving-customers-data-list").length&&$("#frm_saving #txt-saving-customers-data-list").on("input",function(){var t=this.value;$("#saving-customers-data-list").find("option").filter(function(){this.value==t&&""!=t&&(customer_account_no=$(this).attr("customer-account-no"),$("#frm_saving #customer_account_no").val(customer_account_no),getCustomerSavingAccountInfo())})}),$("#frm_saving input.month-picker").length&&$("#frm_saving input.month-picker").monthpicker({changeYear:!0,onClose:getMonthYearValues}),$("#frm_saving .saving-month-year").length&&$(".saving-month-year").datetimepicker({format:"d/m/Y",datepicker:!0,timepicker:!1}),$("#frm_saving #customer_account_no").length&&$("#frm_saving #customer_account_no").change(function(){getCustomerSavingAccountInfo()}),$("#frm_saving #customer_account_no").length&&$("#frm_saving #customer_account_no").val().length>3&&getCustomerSavingAccountInfo(),$("#frm_saving #month_year").length&&bindMonthYear(),$(".date_class").length&&$(".date_class").datetimepicker({format:"d/m/Y",timepicker:!1,scrollInput:!1,autoclose:!0}),$("#staff_dashboard").length&&$("#staff_dashboard").click(function(){var t=$("#url").val()+"/staff";window.location.href=t}),$("#frm_withdrawal #customer_account_no").length&&$("#frm_withdrawal #customer_account_no").change(function(){var t=$("#url").val()+"/withdrawal/getCustomerAccountInfo",a=$("#frm_withdrawal").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"json",success:function(t){"success"==t.status?($("#agent_id").val(t.agent_id),$("#customer_name").val(t.customer_first_name+" "+t.customer_last_name),$("#agent_name").val(t.agent_name),$("#total_deposit").val(t.total_deposit),getWithDrawalHistory()):($(".clear-all").val(""),$("#frm_withdrawal .withdrawal_history").html(""))}})}),$("#frm_withdrawal .amount_in_hand").length&&$("#frm_withdrawal .amount_in_hand").change(function(){var t=$("#url").val()+"/withdrawal/getAmountInHand",a=$("#frm_withdrawal").serialize();$.ajax({url:t,type:"POST",data:a,dataType:"json",success:function(t){if(""!==t.amount_in_hand){var a=t.amount_in_hand;$("#amount_in_hand").val(a)}""!==t.total_balance&&$("#total_balance").val(t.total_balance)}})});